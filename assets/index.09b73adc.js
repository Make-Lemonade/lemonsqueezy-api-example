import{r as e,c as t,a as r,b as s,o,g as a,d as n,F as i,e as d,w as l,t as c,f as u,s as h,h as p,i as m,j as f,k as g,l as y,v,m as b,n as w,p as k,q as x,u as C}from"./vendor.84c1fd8d.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const L={},q={class:"bg-gray-100"},S={class:"max-w-60 mx-auto h-screen overflow-auto bg-light-95"};L.render=function(a,n){const i=e("router-view");return o(),t("div",q,[r("div",S,[s(i)])])};var F={get(e,t={}){return this.request("get",e,t)},post(e,t={}){return this.request("post",e,t)},put(e,t={}){return this.request("put",e,t)},patch(e,t={}){return this.request("patch",e,t)},delete(e,t={}){return this.request("delete",e,t)},request:(e,t,r={})=>a("user.token").then((s=>n({method:e,url:`https://api.lemonsqueezy.com/${t}`,headers:{Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json",Authorization:`Bearer ${s}`},params:"get"===e?r:{},data:"get"!==e?r:{}})))};const $={props:{store:{type:Object,required:!0}},data:()=>({orders:{}}),created(){this.getOrders()},methods:{getOrders(){F.get(`v1/stores/${this.store.id}/orders`).then((e=>{this.orders=e.data})).catch((e=>{console.error(e)}))}}},j={class:"bg-white min-h-screen"},O=["onClick"],I={class:"inline-flex items-center flex-shrink-0 justify-center bg-light-95 w-8 h-6 rounded mr-2"},_={class:"font-medium"},A={class:"mr-2 truncate"},K={class:"flex items-center"},M={class:"font-medium truncate overflow-ellipsis"},z={class:"text-grey"},D=u(" Free "),P=r("div",{class:"flex-shrink-0 ml-auto text-grey"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3 stroke-current fill-transparent"},[r("path",{d:"M4.75 11.98h14.5M12.75 5.75l6.5 6.25-6.5 6.25","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1);$.render=function(e,s,a,n,h,p){return o(),t("div",j,[(o(!0),t(i,null,d(h.orders.data,(s=>(o(),t("a",{href:"#",class:"flex items-center px-2 py-1.5 border-b border-light-95 hover:bg-light-97",key:s.id,onClick:l((t=>e.$router.push({name:"order",params:{id:s.id}})),["prevent"])},[r("div",I,[r("span",_,c(s.attributes.order_number),1)]),r("div",A,[r("div",K,[r("h4",M,c(s.attributes.user_name?s.attributes.user_name:s.attributes.user_email),1)]),r("p",z,[s.attributes.total>0?(o(),t(i,{key:0},[u(c(e.formatCurrency(s.attributes.total,s.attributes.currency)),1)],64)):(o(),t(i,{key:1},[D],64))])]),P],8,O)))),128))])};const B={data:()=>({store:{}}),components:{Orders:$},created(){this.loadDefaultStore()},methods:{async loadDefaultStore(){const e=await a("currentStore");e?this.getStore(e):this.getFirstStore()},getStore(e){F.get(`v1/stores/${e}`).then((e=>{this.store=e.data})).catch((e=>{console.error(e)}))},getFirstStore(){F.get("v1/stores").then((e=>{if(e.data.data.length){const t=e.data.data[0];h("currentStore",t.id),this.getStore(t.id)}})).catch((e=>{console.error(e)}))}}},N={key:0};B.render=function(r,a,n,i,d,l){const u=e("Header"),h=e("Orders");return o(),t("div",null,[s(u,{loading:!d.store.data},{default:p((()=>[d.store.data?(o(),t("span",N,c(d.store.data.attributes.name),1)):f("",!0)])),_:1},8,["loading"]),d.store.data?(o(),m(h,{key:0,store:d.store.data},null,8,["store"])):f("",!0)])};const E={data:()=>({order:{}}),created(){this.$watch((()=>this.$route.params),(()=>{this.getOrder()}),{immediate:!0})},methods:{getOrder(){F.get(`v1/orders/${this.$route.params.id}?include=order-items`).then((e=>{this.order=e.data})).catch((e=>{console.error(e)}))}}},H={key:0};E.render=function(r,a,n,i,d,l){const u=e("Header");return o(),t("div",null,[s(u,{loading:!d.order.data,"show-done":!0},{default:p((()=>[d.order.data?(o(),t("span",H," Order #"+c(d.order.data.attributes.order_number)+" - "+c(r.formatCurrency(d.order.data.attributes.total,d.order.data.attributes.currency)),1)):f("",!0)])),_:1},8,["loading"])])};const U={data:()=>({apiKey:"",error:"",working:!1}),emits:["login"],methods:{submit(){this.error="",this.working=!0,h("user.token",this.apiKey).then((()=>{F.get("v1/stores").then((e=>{200===e.status?this.$router.push({name:"dashboard"}):(this.error="Invalid API key",g("user.token"))})).catch((()=>{this.error="Invalid API key",g("user.token")})).finally((()=>{this.working=!1}))}))}},watch:{apiKey(){this.error=""}}},T={class:"p-6 py-15"},V=b('<div class="flex items-center justify-center"><a href="https://www.lemonsqueezy.com"><svg width="24" height="40" viewBox="0 0 24 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.44011 24.4129L15.506 28.1336C16.5057 28.595 17.2114 29.3693 17.5924 30.2575C18.5563 32.5067 17.239 34.8071 15.1709 35.6343C13.1025 36.4613 10.8981 35.9291 9.89582 33.5901L6.38556 25.3782C6.11354 24.7416 6.79687 24.1162 7.44011 24.4129" fill="#FFC233"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M7.92482 22.0046L16.2509 18.8643C19.018 17.8206 22.0408 19.7953 22 22.6646C21.9994 22.7021 21.9987 22.7395 21.9977 22.7773C21.938 25.5714 18.9993 27.4494 16.293 26.4609L7.93271 23.4078C7.26581 23.1644 7.26088 22.255 7.92482 22.0046" fill="#FFC233"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M7.45767 20.9168L15.6425 17.4468C18.3623 16.2936 19.0525 12.8325 16.9224 10.8326C16.8945 10.8063 16.8666 10.7803 16.8383 10.7543C14.7499 8.82013 11.2974 9.50112 10.1085 12.0487L6.43564 19.9194C6.14259 20.5471 6.8049 21.1935 7.45767 20.9168" fill="#FFC233"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M5.35143 19.5456L8.32719 11.4044C8.69612 10.395 8.62779 9.36556 8.24637 8.47734C7.28051 6.22905 4.66482 5.50331 2.5971 6.33186C0.529704 7.16073 -0.638522 9.04315 0.365771 11.3812L3.89903 19.5843C4.17302 20.2199 5.11424 20.1948 5.35143 19.5456" fill="#FFC233"></path></svg></a></div><div class="text-center my-5"><h1 class="text-24 font-medium">Sign in to Lemon Squeezy</h1></div>',2),G={class:"form-group"},J=["disabled"],Q={key:0,class:"form-error"},R=r("p",{class:"form-input-desc"},[u(" Create an API key in your "),r("a",{href:"https://app.lemonsqueezy.com/account",target:"_blank",class:"text-wtf-majorelle hover:underline"},"account settings"),u(". ")],-1),W=["disabled"],X=[r("span",{class:"mx-auto"},"Login",-1)];U.render=function(e,s,a,n,i,d){return o(),t("div",T,[V,r("form",{onSubmit:s[1]||(s[1]=l(((...e)=>d.submit&&d.submit(...e)),["prevent"])),class:"flex flex-col"},[r("div",G,[y(r("input",{type:"text",class:"form-input","onUpdate:modelValue":s[0]||(s[0]=e=>i.apiKey=e),placeholder:"Enter your Lemon Squeezy API key",required:"",disabled:i.working},null,8,J),[[v,i.apiKey]]),i.error?(o(),t("p",Q,c(i.error),1)):f("",!0),R]),r("button",{class:"btn btn-primary",disabled:!i.apiKey||i.working},X,8,W)],32)])};const Y={props:{loading:{type:Boolean,default:!1},showDone:{type:Boolean,default:!1}}},Z={class:"relative flex items-center justify-center h-6 bg-light-97 border-b"},ee={class:"text-16 font-medium"},te=u(" Loading... ");Y.render=function(e,s,a,n,d,c){return o(),t("div",Z,[r("h1",ee,[a.loading?(o(),t(i,{key:0},[te],64)):w(e.$slots,"default",{key:1})]),a.showDone&&!a.loading?(o(),t("a",{key:0,href:"#",class:"absolute top-0 right-0 inline-flex items-center h-full px-3 text-15 text-wtf-majorelle font-medium",onClick:s[0]||(s[0]=l((t=>e.$router.go(-1)),["prevent"]))}," Done ")):f("",!0)])};const re=k({history:x(),routes:[{path:"/",component:B,name:"dashboard"},{path:"/order/:id",component:E,name:"order"},{path:"/login",component:U,name:"login"}]});re.beforeEach((async(e,t)=>{const r=await a("user.token");return"/login"===e.path&&r?"/":"/login"===e.path||r?void 0:"/login"}));const se=C(L);se.use(re),se.component("Header",Y),se.mixin({methods:{formatCurrency:(e,t)=>(e>0&&(e/=100),new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e))}}),se.mount("#app");
